qh.component('sort-filter', function(ngm, qhm) {
	ngm.directive('listOptionsSort', function() {
		return {
			restrict: 'A',
			scope: {name:"@", columns:"@"},
			templateUrl: qhm.getPath()+"/partial/sort.html",
			controller: ["$scope", "$attrs", "sort-filter.factory.sort", function($scope, $attrs, sort) {
				// Perhaps 5 placeholders to stop the screen jumping around.
				// That would be generated by list.
				
				var watchParams = [];
				$.each(["name", "columns"], function(name) {
					watchParams[name] = "$attrs."+name;
				});
				$scope.$watchCollection("["+watchParams.join(",")+"]", function () {
					var columns = JSON.parse($attrs.columns);
					sort.addSort($attrs.name, columns);
					$scope.sort = sort.getSort($attrs.name);
				});
			}],
		};
	});
});
