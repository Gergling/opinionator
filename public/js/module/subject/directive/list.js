qh.getModule('subject').directive('subjectList', function() {
	return {
		restrict: 'A',
		scope: true,
		templateUrl: qh.getQHModule('subject').getPath()+"/partial/list.html",
		controller: ["$scope", "$attrs", "subject.factory.list", function($scope, $attrs, list) { //$scope.$watch("$attrs.chartName", function () {});
			// Perhaps 5 placeholders to stop the screen jumping around.
			// That would be generated by list.
			var params = {
				offset: 0,
				limit: 5,
				whereString: "",
				orderString: "sum ASC",
			};
			$.each(params, function(name, value) {
				params[name] = $attrs[name] || params[name];
			});
			$scope.subjectList = [];
			for(var i=0;i<5;i++) {
				$scope.subjectList.push({});
			}
			list.fetch(params).then(function(response) {
				$scope.subjectList = response.data.subjects;
			});
		}],
	};
});